{% extends 'base.html' %}

{% block title %}Register - College Grievance System{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow">
                <div class="card-header bg-success text-white text-center py-4">
                    <h3><i class="fas fa-user-plus me-2"></i>Create Account</h3>
                    <p class="mb-0">Join the College Grievance System</p>
                </div>
                <div class="card-body p-5">
                    <form method="post">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="username" class="form-label">Username *</label>
                                <input type="text" class="form-control" id="username" name="username" 
                                       value="{{ form.username.value|default:'' }}" required>
                                {% if form.username.errors %}
                                <div class="text-danger small">{{ form.username.errors.0 }}</div>
                                {% endif %}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="email" class="form-label">Email Address *</label>
                                <input type="email" class="form-control" id="email" name="email" 
                                       value="{{ form.email.value|default:'' }}" required>
                                {% if form.email.errors %}
                                <div class="text-danger small">{{ form.email.errors.0 }}</div>
                                {% endif %}
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="enrollment_number" class="form-label">Enrollment Number</label>
                                <input type="text" maxlength="15" class="form-control" id="enrollment_number" name="enrollment_number" 
                                       value="{{ form.enrollment_number.value|default:'' }}" 
                                       placeholder="For students only">
                            </div>
                            <div class="col-md-6 mb-3">
    <label for="semester" class="form-label">Semester</label>
    <select class="form-select" id="semester" name="semester" required>
        <option value="" disabled selected>Select your semester</option>
        <option value="1" {% if form.semester.value == "1" %}selected{% endif %}>1st Semester</option>
        <option value="2" {% if form.semester.value == "2" %}selected{% endif %}>2nd Semester</option>
        <option value="3" {% if form.semester.value == "3" %}selected{% endif %}>3rd Semester</option>
        <option value="4" {% if form.semester.value == "4" %}selected{% endif %}>4th Semester</option>
        <option value="5" {% if form.semester.value == "5" %}selected{% endif %}>5th Semester</option>
        <option value="6" {% if form.semester.value == "6" %}selected{% endif %}>6th Semester</option>
        <option value="7" {% if form.semester.value == "7" %}selected{% endif %}>7th Semester</option>
        <option value="8" {% if form.semester.value == "8" %}selected{% endif %}>8th Semester</option>
    </select>
    <div class="form-text">Choose your current semester</div>
</div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="department" class="form-label">Department</label>
                            <select class="form-select" id="department" name="department">
                                <option value="">Select your department</option>
                                {% for faculty in form.department.field.queryset %}
                                <option value="{{ faculty.id }}" 
                                        {% if form.department.value == faculty.id %}selected{% endif %}>
                                      {{ faculty.department }}
                                </option>
                                {% endfor %}
                            </select>
                        </div>
                        
<div class="row">
    <div class="col-md-6 mb-3">
        <label for="password1" class="form-label">Password *</label>
        <div class="password-toggle-group">
            <input type="password" class="form-control password-field" id="password1" name="password1" required>
            <button type="button" class="password-toggle-icon" aria-label="Toggle password visibility">
                <i class="fas fa-eye"></i>
            </button>
        </div>
        {% if form.password1.errors %}
        <div class="text-danger small mt-1">{{ form.password1.errors.0 }}</div>
        {% endif %}
    </div>
    
    <div class="col-md-6 mb-3">
        <label for="password2" class="form-label">Confirm Password *</label>
        <div class="password-toggle-group">
            <input type="password" class="form-control password-field" id="password2" name="password2" required>
            <button type="button" class="password-toggle-icon" aria-label="Toggle password visibility">
                <i class="fas fa-eye"></i>
            </button>
        </div>
        {% if form.password2.errors %}
        <div class="text-danger small mt-1">{{ form.password2.errors.0 }}</div>
        {% endif %}
    </div>
</div>
                        
                        <div class="form-check mb-4">
                            <input class="form-check-input" type="checkbox" id="terms" required>
                            <label class="form-check-label" for="terms">
                                I agree to the <a href="#" class="text-decoration-none">Terms of Service</a> 
                                and <a href="#" class="text-decoration-none">Privacy Policy</a>
                            </label>
                        </div>
                        
                        <div class="d-grid">
                            <button type="submit" class="btn btn-success btn-lg">
                                <i class="fas fa-user-plus me-2"></i>Create Account
                            </button>
                        </div>
                    </form>
                    
                    <div class="text-center mt-4">
                        <p class="mb-0">
                            Already have an account? 
                            <a href="{% url 'login' %}" class="text-decoration-none fw-bold">
                                Login here
                            </a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}